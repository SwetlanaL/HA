"use strict";(self.webpackChunkhaertelautomatisering=self.webpackChunkhaertelautomatisering||[]).push([[431],{431:function(t,e,s){s.r(e),e.default=class{selectors={root:"[data-js-header]",overlay:"[data-js-header-overlay]",burgerButton:"[data-js-header-burger-button]",link:"[data-js-menu-link]",hero:"[data-js-hero]",sections:".section[id]"};stateClasses={isActive:"is-active",isLock:"is-lock",isLinkActive:"is-link-active"};constructor(){this.rootElement=document.querySelector(this.selectors.root),this.rootElement&&(this.overlayElement=this.rootElement.querySelector(this.selectors.overlay),this.burgerButtonElement=this.rootElement.querySelector(this.selectors.burgerButton),this.navLinks=Array.from(this.rootElement.querySelectorAll(this.selectors.link)).filter(t=>"A"===t.tagName&&(t.getAttribute("href")||"").startsWith("#")),this.heroSection=document.querySelector(this.selectors.hero),this.sections=document.querySelectorAll(this.selectors.sections),this._observers=[],this._scrollHandler=null,this._resizeHandler=null,this._keydownHandler=null,this.burgerButtonElement&&this.attachBurgerButtonEvents(),this.heroSection&&this.observeHeader(),this.navLinks.length&&this.sections.length&&this.observeActiveLinks(),this.navLinks.length&&this.initKeyboardNav(),this.navLinks.length&&this.initTabIndex())}onBurgerButtonClick=()=>{if(!this.burgerButtonElement||!this.overlayElement)return;const t=this.burgerButtonElement.classList.toggle(this.stateClasses.isActive);this.burgerButtonElement.setAttribute("aria-expanded",t?"true":"false"),this.overlayElement.classList.toggle(this.stateClasses.isActive,t),t?(this._scrollY=window.scrollY,document.documentElement.style.setProperty("--scroll-y",`-${this._scrollY}px`),document.documentElement.classList.add(this.stateClasses.isLock),this.attachNavLinksEvents()):(document.documentElement.classList.remove(this.stateClasses.isLock),window.scrollTo({top:this._scrollY||0,behavior:"instant"}),this.detachNavLinksEvents())};onLinkClick=()=>{this.overlayElement&&this.burgerButtonElement&&this.overlayElement.classList.contains(this.stateClasses.isActive)&&(this.burgerButtonElement.classList.remove(this.stateClasses.isActive),this.burgerButtonElement.setAttribute("aria-expanded","false"),this.overlayElement.classList.remove(this.stateClasses.isActive),document.documentElement.classList.remove(this.stateClasses.isLock),window.scrollTo({top:this._scrollY||0,behavior:"instant"}),this.detachNavLinksEvents(),this.burgerButtonElement.focus())};attachBurgerButtonEvents(){this.burgerButtonElement?.addEventListener("click",this.onBurgerButtonClick)}attachNavLinksEvents(){this.navLinks.forEach(t=>t.addEventListener("click",this.onLinkClick))}detachNavLinksEvents(){this.navLinks.forEach(t=>t.removeEventListener("click",this.onLinkClick))}observeHeader=()=>{const t=t=>{this.rootElement.classList.toggle(this.stateClasses.isActive,t)},e=this.rootElement.getBoundingClientRect().height,s=()=>{t(window.scrollY>e)};window.addEventListener("scroll",s,{passive:!0}),this._scrollHandler=s,s()};observeActiveLinks=()=>{const t=new Map;this.navLinks.forEach(e=>{const s=e.getAttribute("href");if(!s||!s.startsWith("#"))return;const i=s.slice(1);i&&t.set(i,e)});const e=e=>{this.navLinks.forEach(t=>{t.classList.remove(this.stateClasses.isLinkActive),t.removeAttribute("aria-current"),t.setAttribute("tabindex","-1")});const s=t.get(e);s&&(s.classList.add(this.stateClasses.isLinkActive),s.setAttribute("aria-current","page"),s.setAttribute("tabindex","0"))};if("IntersectionObserver"in window){const t=new Map;this.sections.forEach(e=>{e.id&&t.set(e.id,!1)});const s=new IntersectionObserver(s=>{s.forEach(e=>{e.target.id&&t.set(e.target.id,e.isIntersecting)});const i=Array.from(this.sections).filter(e=>t.get(e.id));if(0===i.length)return;let n=i[0],r=Math.abs(i[0].getBoundingClientRect().top);i.forEach(t=>{const e=Math.abs(t.getBoundingClientRect().top);e<r&&(r=e,n=t)}),n?.id&&e(n.id)},{root:null,rootMargin:"-20% 0px -20% 0px",threshold:[0,.1,.25,.5,.75,1]});return this.sections.forEach(t=>s.observe(t)),this._observers.push(s),void requestAnimationFrame(()=>{requestAnimationFrame(()=>{!this.navLinks.some(t=>t.classList.contains(this.stateClasses.isLinkActive))&&this.sections[0]?.id&&e(this.sections[0].id)})})}let s=!1;const i=()=>{s||(s=!0,requestAnimationFrame(()=>{const t=.3*window.innerHeight;let i=null,n=1/0;this.sections.forEach(e=>{const s=e.getBoundingClientRect();if(s.bottom>0&&s.top<window.innerHeight){const r=Math.abs(s.top-t);r<n&&(n=r,i=e)}}),i?.id&&e(i.id),s=!1}))};this._scrollHandler=i,this._resizeHandler=i,window.addEventListener("scroll",i,{passive:!0}),window.addEventListener("resize",i,{passive:!0}),i()};initKeyboardNav=()=>{this._desktopMQ=window.matchMedia("(min-width: 767.98px)"),this._keydownHandler=t=>{if("Escape"===t.key)return void(this.overlayElement?.classList.contains(this.stateClasses.isActive)&&(this.onBurgerButtonClick(),this.burgerButtonElement?.focus()));if(!this._desktopMQ.matches)return;const e=this.navLinks.indexOf(document.activeElement);if(-1===e)return;let s=null;"ArrowRight"===t.key?s=(e+1)%this.navLinks.length:"ArrowLeft"===t.key?s=(e-1+this.navLinks.length)%this.navLinks.length:"Home"===t.key?s=0:"End"===t.key&&(s=this.navLinks.length-1),null!==s&&(t.preventDefault(),this.navLinks[s].focus())},document.addEventListener("keydown",this._keydownHandler)};initTabIndex=()=>{this.navLinks.forEach((t,e)=>{t.setAttribute("tabindex",0===e?"0":"-1")})};destroy(){this.burgerButtonElement?.removeEventListener("click",this.onBurgerButtonClick),this.detachNavLinksEvents(),this._observers.forEach(t=>t.disconnect()),this._observers=[],this._scrollHandler&&(window.removeEventListener("scroll",this._scrollHandler),this._scrollHandler=null),this._resizeHandler&&(window.removeEventListener("resize",this._resizeHandler),this._resizeHandler=null),this._keydownHandler&&(document.removeEventListener("keydown",this._keydownHandler),this._keydownHandler=null)}}}}]);