"use strict";(self.webpackChunkhaertelautomatisering=self.webpackChunkhaertelautomatisering||[]).push([[431],{431:function(t,e,s){s.r(e),e.default=class{selectors={root:"[js-header]",overlay:"[js-header-overlay]",burgerButton:"[js-header-burger-button]",link:"[js-menu-link]",hero:"[js-hero]",sections:".section[id]"};stateClasses={isActive:"is-active",isLock:"is-lock",isLinkActive:"is-link-active"};constructor(){this.rootElement=document.querySelector(this.selectors.root),this.rootElement&&(this.overlayElement=this.rootElement.querySelector(this.selectors.overlay),this.burgerButtonElement=this.rootElement.querySelector(this.selectors.burgerButton),this.navLinks=Array.from(this.rootElement.querySelectorAll(this.selectors.link)).filter(t=>"A"===t.tagName&&(t.getAttribute("href")||"").startsWith("#")),this.heroSection=document.querySelector(this.selectors.hero),this.sections=document.querySelectorAll(this.selectors.sections),this._observers=[],this._scrollHandler=null,this._resizeHandler=null,this.burgerButtonElement&&this.attachBurgerButtonEvents(),this.heroSection&&this.observeHeader(),this.navLinks.length&&this.sections.length&&this.observeActiveLinks())}onBurgerButtonClick=()=>{if(!this.burgerButtonElement||!this.overlayElement)return;const t=this.burgerButtonElement.classList.toggle(this.stateClasses.isActive);this.burgerButtonElement.setAttribute("aria-expanded",t?"true":"false"),this.overlayElement.classList.toggle(this.stateClasses.isActive,t),document.documentElement.classList.toggle(this.stateClasses.isLock,t),t?this.attachNavLinksEvents():this.detachNavLinksEvents()};onLinkClick=()=>{this.overlayElement&&this.burgerButtonElement&&this.overlayElement.classList.contains(this.stateClasses.isActive)&&(this.burgerButtonElement.classList.remove(this.stateClasses.isActive),this.burgerButtonElement.setAttribute("aria-expanded","false"),this.overlayElement.classList.remove(this.stateClasses.isActive),document.documentElement.classList.remove(this.stateClasses.isLock),this.detachNavLinksEvents())};attachBurgerButtonEvents(){this.burgerButtonElement?.addEventListener("click",this.onBurgerButtonClick)}attachNavLinksEvents(){this.navLinks.forEach(t=>t.addEventListener("click",this.onLinkClick))}detachNavLinksEvents(){this.navLinks.forEach(t=>t.removeEventListener("click",this.onLinkClick))}observeHeader=()=>{const t=t=>{this.rootElement.classList.toggle(this.stateClasses.isActive,t)};if("IntersectionObserver"in window){const e=new IntersectionObserver(e=>{const s=e[0];t(!s.isIntersecting)},{root:null,rootMargin:"-10% 0px 0px 0px",threshold:0});return e.observe(this.heroSection),void this._observers.push(e)}};observeActiveLinks=()=>{const t=new Map;this.navLinks.forEach(e=>{const s=e.getAttribute("href");if(!s||!s.startsWith("#"))return;const i=s.slice(1);i&&t.set(i,e)});const e=e=>{this.navLinks.forEach(t=>t.classList.remove(this.stateClasses.isLinkActive));const s=t.get(e);s&&s.classList.add(this.stateClasses.isLinkActive)};if("IntersectionObserver"in window){const t=new Map;this.sections.forEach(e=>{e.id&&t.set(e.id,!1)});const s=new IntersectionObserver(s=>{s.forEach(e=>{e.target.id&&t.set(e.target.id,e.isIntersecting)});const i=Array.from(this.sections).filter(e=>t.get(e.id));if(0===i.length)return;let n=i[0],r=Math.abs(i[0].getBoundingClientRect().top);i.forEach(t=>{const e=Math.abs(t.getBoundingClientRect().top);e<r&&(r=e,n=t)}),n?.id&&e(n.id)},{root:null,rootMargin:"-20% 0px -20% 0px",threshold:[0,.1,.25,.5,.75,1]});return this.sections.forEach(t=>s.observe(t)),this._observers.push(s),void requestAnimationFrame(()=>{requestAnimationFrame(()=>{!this.navLinks.some(t=>t.classList.contains(this.stateClasses.isLinkActive))&&this.sections[0]?.id&&e(this.sections[0].id)})})}let s=!1;const i=()=>{s||(s=!0,requestAnimationFrame(()=>{const t=.3*window.innerHeight;let i=null,n=1/0;this.sections.forEach(e=>{const s=e.getBoundingClientRect();if(s.bottom>0&&s.top<window.innerHeight){const r=Math.abs(s.top-t);r<n&&(n=r,i=e)}}),i?.id&&e(i.id),s=!1}))};this._scrollHandler=i,this._resizeHandler=i,window.addEventListener("scroll",i,{passive:!0}),window.addEventListener("resize",i,{passive:!0}),i()};destroy(){this.burgerButtonElement?.removeEventListener("click",this.onBurgerButtonClick),this.detachNavLinksEvents(),this._observers.forEach(t=>t.disconnect()),this._observers=[],this._scrollHandler&&(window.removeEventListener("scroll",this._scrollHandler),this._scrollHandler=null),this._resizeHandler&&(window.removeEventListener("resize",this._resizeHandler),this._resizeHandler=null)}}}}]);