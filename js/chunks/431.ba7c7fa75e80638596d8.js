"use strict";(self.webpackChunkhaertelautomatisering=self.webpackChunkhaertelautomatisering||[]).push([[431],{431:function(t,e,s){s.r(e),e.default=class{selectors={root:"[data-js-header]",overlay:"[data-js-header-overlay]",burgerButton:"[data-js-header-burger-button]",link:"[data-js-menu-link]",hero:"[data-js-hero]",sections:".section[id]"};stateClasses={isActive:"is-active",isLock:"is-lock",isLinkActive:"is-link-active"};constructor(){this.rootElement=document.querySelector(this.selectors.root),this.rootElement&&(this.overlayElement=this.rootElement.querySelector(this.selectors.overlay),this.burgerButtonElement=this.rootElement.querySelector(this.selectors.burgerButton),this.navLinks=Array.from(this.rootElement.querySelectorAll(this.selectors.link)).filter(t=>"A"===t.tagName&&(t.getAttribute("href")||"").startsWith("#")),this.heroSection=document.querySelector(this.selectors.hero),this.sections=document.querySelectorAll(this.selectors.sections),this._observers=[],this._scrollHandler=null,this._resizeHandler=null,this._keydownHandler=null,this._sectionsResizeObserver=null,this._sectionTops=new Map,this.burgerButtonElement&&this.attachBurgerButtonEvents(),this.heroSection&&this.observeHeader(),this.navLinks.length&&this.sections.length&&this.observeActiveLinks(),this.navLinks.length&&this.initKeyboardNav(),this.navLinks.length&&this.initTabIndex())}onBurgerButtonClick=()=>{if(!this.burgerButtonElement||!this.overlayElement)return;const t=this.burgerButtonElement.classList.toggle(this.stateClasses.isActive);this.burgerButtonElement.setAttribute("aria-expanded",t?"true":"false"),this.overlayElement.classList.toggle(this.stateClasses.isActive,t),t?(this.overlayElement.style.willChange="transform",this._scrollY=window.scrollY,document.documentElement.style.setProperty("--scroll-y",`-${this._scrollY}px`),document.documentElement.classList.add(this.stateClasses.isLock),this.attachNavLinksEvents()):(this.overlayElement.addEventListener("transitionend",()=>{this.overlayElement.style.willChange="auto"},{once:!0}),document.documentElement.classList.remove(this.stateClasses.isLock),requestAnimationFrame(()=>{window.scrollTo({top:this._scrollY||0,behavior:"instant"})}),this.detachNavLinksEvents())};onLinkClick=()=>{this.overlayElement&&this.burgerButtonElement&&this.overlayElement.classList.contains(this.stateClasses.isActive)&&(this.burgerButtonElement.classList.remove(this.stateClasses.isActive),this.burgerButtonElement.setAttribute("aria-expanded","false"),this.overlayElement.classList.remove(this.stateClasses.isActive),document.documentElement.classList.remove(this.stateClasses.isLock),window.scrollTo({top:this._scrollY||0,behavior:"instant"}),this.detachNavLinksEvents(),this.burgerButtonElement.focus())};attachBurgerButtonEvents(){this.burgerButtonElement?.addEventListener("click",this.onBurgerButtonClick)}attachNavLinksEvents(){this.navLinks.forEach(t=>t.addEventListener("click",this.onLinkClick))}detachNavLinksEvents(){this.navLinks.forEach(t=>t.removeEventListener("click",this.onLinkClick))}observeHeader=()=>{const t=t=>{this.rootElement.classList.toggle(this.stateClasses.isActive,t)},e=this.rootElement.getBoundingClientRect().height,s=()=>{t(window.scrollY>e)};window.addEventListener("scroll",s,{passive:!0}),this._scrollHandler=s,s()};observeActiveLinks=()=>{const t=new Map;this.navLinks.forEach(e=>{const s=e.getAttribute("href");if(!s?.startsWith("#"))return;const i=s.slice(1);i&&t.set(i,e)});let e=null;const s=s=>{const i=t.get(s)||null;i!==e&&(e&&(e.classList.remove(this.stateClasses.isLinkActive),e.removeAttribute("aria-current"),e.setAttribute("tabindex","-1")),i&&(i.classList.add(this.stateClasses.isLinkActive),i.setAttribute("aria-current","page"),i.setAttribute("tabindex","0")),e=i)};if(!("IntersectionObserver"in window))return void this._initScrollFallback(s);const i=new Map;this.sections.forEach(t=>{t.id&&i.set(t.id,!1)});const n=new IntersectionObserver(t=>{t.forEach(t=>{t.target.id&&i.set(t.target.id,t.isIntersecting)}),requestAnimationFrame(()=>{const t=Array.from(this.sections).filter(t=>i.get(t.id));if(0===t.length)return;let e=t[0],n=1/0;for(const s of t){const t=this._sectionTops.get(s.id)??0,i=Math.abs(t-window.scrollY);i<n&&(n=i,e=s)}e?.id&&s(e.id)})},{root:null,rootMargin:"-20% 0px -20% 0px",threshold:0});this.sections.forEach(t=>n.observe(t)),this._observers.push(n);const r=()=>{this.sections.forEach(t=>{this._sectionTops.set(t.id,t.getBoundingClientRect().top+window.scrollY)})};r(),this._sectionsResizeObserver=new ResizeObserver(()=>{requestAnimationFrame(r)}),this.sections.forEach(t=>this._sectionsResizeObserver.observe(t)),requestAnimationFrame(()=>{requestAnimationFrame(()=>{!this.navLinks.some(t=>t.classList.contains(this.stateClasses.isLinkActive))&&this.sections[0]?.id&&s(this.sections[0].id)})})};_initScrollFallback=t=>{let e=!1;const s=()=>{e||(e=!0,requestAnimationFrame(()=>{const s=.3*window.innerHeight;let i=null,n=1/0;this.sections.forEach(t=>{const e=t.getBoundingClientRect();if(e.bottom>0&&e.top<window.innerHeight){const r=Math.abs(e.top-s);r<n&&(n=r,i=t)}}),i?.id&&t(i.id),e=!1}))};this._scrollHandler=s,this._resizeHandler=s,window.addEventListener("scroll",s,{passive:!0}),window.addEventListener("resize",s,{passive:!0}),s()};initKeyboardNav=()=>{this._desktopMQ=window.matchMedia("(min-width: 767.98px)"),this._keydownHandler=t=>{if("Escape"===t.key)return void(this.overlayElement?.classList.contains(this.stateClasses.isActive)&&(this.onBurgerButtonClick(),this.burgerButtonElement?.focus()));if(!this._desktopMQ.matches)return;const e=this.navLinks.indexOf(document.activeElement);if(-1===e)return;let s=null;"ArrowRight"===t.key?s=(e+1)%this.navLinks.length:"ArrowLeft"===t.key?s=(e-1+this.navLinks.length)%this.navLinks.length:"Home"===t.key?s=0:"End"===t.key&&(s=this.navLinks.length-1),null!==s&&(t.preventDefault(),this.navLinks[s].focus())},document.addEventListener("keydown",this._keydownHandler)};initTabIndex=()=>{this.navLinks.forEach((t,e)=>{t.setAttribute("tabindex",0===e?"0":"-1")})};destroy(){this.burgerButtonElement?.removeEventListener("click",this.onBurgerButtonClick),this.detachNavLinksEvents(),this._observers.forEach(t=>t.disconnect()),this._observers=[],this._sectionsResizeObserver?.disconnect(),this._sectionsResizeObserver=null,this._scrollHandler&&(window.removeEventListener("scroll",this._scrollHandler),this._scrollHandler=null),this._resizeHandler&&(window.removeEventListener("resize",this._resizeHandler),this._resizeHandler=null),this._keydownHandler&&(document.removeEventListener("keydown",this._keydownHandler),this._keydownHandler=null)}}}}]);