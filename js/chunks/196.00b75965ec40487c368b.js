"use strict";(self.webpackChunkhaertelautomatisering=self.webpackChunkhaertelautomatisering||[]).push([[196],{196:function(e,t,s){s.r(t),s.d(t,{default:function(){return l}});var i=s(146),o=s(892),n=s(891);class a{constructor({successKey:e="modal_success_message",errorKey:t="modal_error_message",successAnimation:s=null,errorAnimation:i=null,successSize:o=150,errorSize:n=120,autoClose:a=4e3}){this.successKey=e,this.errorKey=t,this.successAnimation=s,this.errorAnimation=i,this.successSize=o,this.errorSize=n,this.autoClose=a,this.modalElem=null,this.lottieInstance=null,this.closeTimeout=null,this.currentKey=null,this.messageTextElement=null,this.messageAnimation=null,this.isDestroyed=!1,this.instanceId=`modal_${Date.now()}_${Math.random().toString(36).substring(2,9)}`,this.updateTextHandler=()=>this.updateText(),window.modalUpdateHandlers||(window.modalUpdateHandlers=new Map),window.modalUpdateHandlers.set(this.instanceId,this.updateTextHandler),window.updateModalText||(window.updateModalText=()=>{window.modalUpdateHandlers?.forEach(e=>e())})}open(e="success"){this.isDestroyed?console.warn("[Modal] Attempting to open destroyed modal"):this.create(e)}create(e){this.modalElem&&this.close();const t="success"===e?this.successKey:this.errorKey,s="success"===e?this.successAnimation:this.errorAnimation,i="success"===e?this.successSize:this.errorSize;this.currentKey=t,this.modalElem=document.createElement("div"),this.modalElem.classList.add("modal__container"),this.modalElem.setAttribute("role","dialog"),this.modalElem.setAttribute("aria-modal","true"),this.modalElem.setAttribute("aria-labelledby",`modal-text-${this.instanceId}`);const o=document.createElement("div");if(o.classList.add("modal__content"),this.messageTextElement=document.createElement("p"),this.messageTextElement.classList.add("modal__text"),this.messageTextElement.id=`modal-text-${this.instanceId}`,this.messageTextElement.setAttribute("data-lang",t),this.messageTextElement.innerHTML=this.getTranslation(t),o.appendChild(this.messageTextElement),s){this.messageAnimation=document.createElement("div"),this.messageAnimation.classList.add("modal__animation"),this.messageAnimation.style.width=i+"px",this.messageAnimation.style.height=i+"px",this.messageAnimation.setAttribute("aria-hidden","true"),o.appendChild(this.messageAnimation);try{this.lottieInstance=n.loadAnimation({container:this.messageAnimation,renderer:"canvas",loop:!0,autoplay:!0,path:s})}catch(e){console.error("[Modal] Lottie animation failed:",e)}}this.previousFocus=document.activeElement,this.modalElem.appendChild(o),document.body.appendChild(this.modalElem),this.originalOverflow=document.body.style.overflow,this.originalPosition=document.body.style.position,document.body.style.overflow="hidden",this.isIOS()&&(document.body.style.position="fixed",document.body.style.width="100%"),requestAnimationFrame(()=>{requestAnimationFrame(()=>{this.modalElem&&!this.isDestroyed&&(this.modalElem.classList.add("active"),this.modalElem.focus())})}),this.escHandler=e=>{"Escape"!==e.key&&27!==e.keyCode||this.close()},document.addEventListener("keydown",this.escHandler),this.closeTimeout=setTimeout(()=>this.close(),this.autoClose)}isIOS(){return/iPad|iPhone|iPod/.test(navigator.userAgent)&&!window.MSStream}getTranslation(e){const t=i.w.lang;return o.P[e]?.[t]||o.P[e]?.en||e}updateText(){this.isDestroyed||this.messageTextElement&&this.currentKey&&(this.messageTextElement.innerHTML=this.getTranslation(this.currentKey))}close(){if(this.modalElem&&!this.isDestroyed){if(this.closeTimeout&&(clearTimeout(this.closeTimeout),this.closeTimeout=null),this.escHandler&&(document.removeEventListener("keydown",this.escHandler),this.escHandler=null),document.body.style.overflow=this.originalOverflow||"",this.isIOS()&&(document.body.style.position=this.originalPosition||"",document.body.style.width=""),this.modalElem.classList.remove("active"),this.modalElem.classList.add("closing"),this.lottieInstance){try{this.lottieInstance.destroy()}catch(e){console.error("[Modal] Lottie destroy failed:",e)}this.lottieInstance=null}this.previousFocus&&"function"==typeof this.previousFocus.focus&&setTimeout(()=>{this.previousFocus?.focus()},100),setTimeout(()=>{this.modalElem&&this.modalElem.parentNode&&this.modalElem.remove(),this.modalElem=null,this.messageTextElement=null,this.messageAnimation=null},300)}}destroy(){this.isDestroyed||(this.isDestroyed=!0,this.close(),window.modalUpdateHandlers&&(window.modalUpdateHandlers.delete(this.instanceId),0===window.modalUpdateHandlers.size&&(delete window.updateModalText,delete window.modalUpdateHandlers)))}}var r=s(631);function l(e,t){if(!e||!t?.sendForm)return;const s=[],i=new a({successKey:"modal_success_message",errorKey:"modal_error_message",successAnimation:"./img/gif-animations/success.json",errorAnimation:"./img/gif-animations/error.json"}),o=e.querySelector("button[type='submit']");if(!o)return void console.error("[form] submit button not found");const n={firstName:e.querySelector("#firstName"),lastName:e.querySelector("#lastName"),email:e.querySelector("#email"),phone:e.querySelector("#phone"),message:e.querySelector("#message"),privacy:e.querySelector("#privacy")},l={firstName:e.querySelector("#firstNameHint"),lastName:e.querySelector("#lastNameHint"),email:e.querySelector("#emailHint"),phone:e.querySelector("#phoneHint"),message:e.querySelector("#messageHint"),privacy:e.querySelector("#privacyHint")},d=["firstName","lastName","email","message","privacy"];let m=!1,c=!1;const u=e=>{c=e,o.disabled=c,o.setAttribute("aria-busy",String(c))};function h(e,t){const s=n[e],i=l[e];if(!s||!i)return!1;let o=!0,a="";const m="privacy"===e?"":s.value.trim();if("privacy"===e?s.checked||(o=!1,a=(0,r.A)("form_privacy_required")):d.includes(e)&&!m?(o=!1,a=(0,r.A)("form_required")):"firstName"!==e&&"lastName"!==e&&"message"!==e||!m||/^[A-Za-z0-9\s.,!?'"()\-:;]+$/.test(m)?"email"===e&&m&&!/^[^\s@]+@[^\s@]+\.[^\s@]{2,}$/.test(m)?(o=!1,a=(0,r.A)("form_invalid_email")):"phone"===e&&m&&!function(e){const t=e.replace(/\D/g,"");return t.length>=6&&t.length<=15}(m)&&(o=!1,a=(0,r.A)("form_invalid_phone")):(o=!1,a=(0,r.A)("form_latin_only")),t){const e=s.closest(".field");o?(e?.classList.remove("error"),i.innerHTML="",i.classList.remove("visible"),s.setAttribute("aria-invalid","false")):(e?.classList.add("error"),i.innerHTML=a,i.classList.add("visible"),s.setAttribute("aria-invalid","true"))}return o}Object.keys(n).forEach(e=>{const t=n[e];if(!t)return;const i="privacy"===e?"change":"input",o=()=>{m&&h(e,!0)};t.addEventListener(i,o),s.push({element:t,event:i,handler:o})});const y=async s=>{if(s.preventDefault(),m=!0,function(){let e=!0;return Object.keys(n).forEach(t=>{h(t,true)||(e=!1)}),e}()){u(!0);try{await t.sendForm("service_hmeso6j","template_rfwvzyi",e,"wKYAYjrE2tGCLCVVy"),i.open("success"),e.reset(),Object.keys(n).forEach(e=>{const t=n[e],s=l[e];t?.closest(".field")?.classList.remove("error"),t?.setAttribute("aria-invalid","false"),s&&(s.textContent="",s.classList.remove("visible"))}),m=!1}catch(e){console.error("[EmailJS]",e),i.open("error")}finally{u(!1)}}else!function(){const e=d.find(e=>!h(e,!0));if(!e)return;const t=n[e];t&&("scrollBehavior"in document.documentElement.style?t.scrollIntoView({behavior:"smooth",block:"center"}):(t.scrollIntoView(!1),window.scrollBy(0,-100)),setTimeout(()=>t.focus(),100))}()};return e.addEventListener("submit",y),s.push({element:e,event:"submit",handler:y}),()=>{s.forEach(({element:e,event:t,handler:s})=>{e?.removeEventListener(t,s)}),s.length=0,i.destroy()}}}}]);