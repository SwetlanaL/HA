"use strict";(self.webpackChunkhaertelautomatisering=self.webpackChunkhaertelautomatisering||[]).push([[889],{889:function(e,t,n){n.r(t),t.default=class{constructor(){this.COOKIE_NAME="cookie_consent",this.COOKIE_EXPIRY_DAYS=365,this.elements={},this.init()}init(){this.initGoogleConsentMode(),this.getElements();const e=this.getConsent();null!==e&&this.updateGoogleConsent(e),this.bindEvents()}start(){null===this.getConsent()&&this.showBanner()}getElements(){this.elements.banner=document.getElementById("cookie-banner"),this.elements.acceptBtn=document.getElementById("cookie-accept-btn"),this.elements.rejectBtn=document.getElementById("cookie-reject-btn"),this.elements.settingsBtn=document.getElementById("cookie-settings-btn"),this.elements.modal=document.getElementById("cookie-modal"),this.elements.modalOverlay=document.getElementById("cookie-modal-overlay"),this.elements.modalClose=document.getElementById("cookie-modal-close"),this.elements.modalReject=document.getElementById("cookie-modal-reject"),this.elements.modalSave=document.getElementById("cookie-modal-save"),this.elements.analyticsToggle=document.getElementById("analytics-toggle"),this.elements.settingsTrigger=document.getElementById("cookie-settings-trigger"),this.elements.cookiePolicyLink=document.getElementById("cookie-policy-link")}bindEvents(){this.elements.acceptBtn?.addEventListener("click",()=>this.acceptAll()),this.elements.rejectBtn?.addEventListener("click",()=>this.rejectAll()),this.elements.settingsBtn?.addEventListener("click",()=>this.openModal()),this.elements.modalClose?.addEventListener("click",()=>this.closeModal()),this.elements.modalOverlay?.addEventListener("click",()=>this.closeModal()),this.elements.modalReject?.addEventListener("click",()=>this.rejectAll()),this.elements.modalSave?.addEventListener("click",()=>this.savePreferences()),this.elements.settingsTrigger?.addEventListener("click",()=>this.openModal()),document.addEventListener("keydown",e=>{"Escape"===e.key&&this.elements.modal?.classList.contains("show")&&this.closeModal()})}initGoogleConsentMode(){function e(){window.dataLayer.push(arguments)}window.dataLayer=window.dataLayer||[],e("consent","default",{analytics_storage:"denied",ad_storage:"denied",ad_user_data:"denied",ad_personalization:"denied",functionality_storage:"granted",personalization_storage:"denied",security_storage:"granted"}),window.gtag=e}updateGoogleConsent(e){if(!window.gtag)return;const t=e.analytics?"granted":"denied";window.gtag("consent","update",{analytics_storage:t,ad_storage:"denied",ad_user_data:"denied",ad_personalization:"denied",functionality_storage:"granted",personalization_storage:"denied",security_storage:"granted"}),e.analytics&&this.initGoogleAnalytics()}initGoogleAnalytics(){const e="G-XXXXXXXXXX";if(document.querySelector(`script[src*="googletagmanager.com/gtag/js?id=${e}"]`))return void console.log("Google Analytics already loaded");const t=document.createElement("script");t.async=!0,t.src=`https://www.googletagmanager.com/gtag/js?id=${e}`,document.head.appendChild(t),t.onload=()=>{window.gtag("js",new Date),window.gtag("config",e,{anonymize_ip:!0,cookie_flags:"SameSite=None;Secure"}),console.log("✅ Google Analytics initialized with ID:",e)},t.onerror=()=>{console.error("❌ Failed to load Google Analytics")}}showBanner(){setTimeout(()=>{this.elements.banner?.classList.add("show")},1e3)}hideBanner(){this.elements.banner?.classList.remove("show")}openModal(){const e=this.getConsent()||{analytics:!1};this.elements.analyticsToggle&&(this.elements.analyticsToggle.checked=e.analytics),this._scrollY=window.scrollY,document.documentElement.style.setProperty("--scroll-y",`-${this._scrollY}px`),document.documentElement.classList.add("is-lock"),this.elements.modal?.classList.add("show")}closeModal(){this.elements.modal?.classList.remove("show"),window.scrollTo({top:this._scrollY||0,behavior:"instant"}),document.documentElement.classList.remove("is-lock"),this._scrollY=null}acceptAll(){const e={analytics:!0,timestamp:(new Date).toISOString()};this.saveConsent(e),this.updateGoogleConsent(e),this.hideBanner(),this.elements.modal?.classList.contains("show")&&this.closeModal()}rejectAll(){const e={analytics:!1,timestamp:(new Date).toISOString()};this.saveConsent(e),this.updateGoogleConsent(e),this.hideBanner(),this.elements.modal?.classList.contains("show")&&this.closeModal()}savePreferences(){const e={analytics:this.elements.analyticsToggle?.checked||!1,timestamp:(new Date).toISOString()};this.saveConsent(e),this.updateGoogleConsent(e),this.hideBanner(),this.closeModal()}saveConsent(e){const t=JSON.stringify(e),n=new Date;n.setDate(n.getDate()+this.COOKIE_EXPIRY_DAYS),document.cookie=`${this.COOKIE_NAME}=${t}; expires=${n.toUTCString()}; path=/; SameSite=Lax; Secure`}getConsent(){const e=document.cookie.split(";");for(let t of e){const[e,n]=t.trim().split("=");if(e===this.COOKIE_NAME)try{return JSON.parse(decodeURIComponent(n))}catch(e){return console.error("Error parsing cookie consent:",e),null}}return null}revokeConsent(){document.cookie=`${this.COOKIE_NAME}=; expires=Thu, 01 Jan 1970 00:00:00 UTC; path=/;`,this.updateGoogleConsent({analytics:!1}),this.showBanner()}}}}]);